<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>merlin.models.tf.HashedCrossAll &mdash; Merlin Models  documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="canonical" href="https://nvidia-merlin.github.io/models/stable/generated/merlin.models.tf.HashedCrossAll.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script >let toggleHintShow = 'Click to show';</script>
        <script >let toggleHintHide = 'Click to hide';</script>
        <script >let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="merlin.models.tf.BroadcastToSequence" href="merlin.models.tf.BroadcastToSequence.html" />
    <link rel="prev" title="merlin.models.tf.HashedCross" href="merlin.models.tf.HashedCross.html" /> 
</head>

<body class="wy-body-for-nav">
  <div class="banner">
    <p class="banner">
      Beginning in January 2023, versions for all NVIDIA Merlin projects
      will change from semantic versioning like <code>4.0</code>
      to calendar versioning like <code>23.01</code>.</p>
  </div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Merlin Models
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models_overview.html">Standard Models: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Example Notebooks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api.html#tensorflow-models">TensorFlow Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#modeling-prediction-output-constructors">Modeling Prediction Output Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#model-evaluation-constructors">Model Evaluation Constructors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#model-optimizer-constructors">Model Optimizer Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#schema-functions">Schema Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#registry-functions">Registry Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../additional_resources.html">Additional Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Merlin Models</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../api.html">API Documentation</a> &raquo;</li>
      <li>merlin.models.tf.HashedCrossAll</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="merlin-models-tf-hashedcrossall">
<h1>merlin.models.tf.HashedCrossAll<a class="headerlink" href="#merlin-models-tf-hashedcrossall" title="Permalink to this headline">ÔÉÅ</a></h1>
<dl class="py function">
<dt id="merlin.models.tf.HashedCrossAll">
<code class="sig-prename descclassname"><span class="pre">merlin.models.tf.</span></code><code class="sig-name descname"><span class="pre">HashedCrossAll</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://nvidia-merlin.github.io/core/stable/api/merlin.schema.html#merlin.schema.Schema" title="(in Merlin Core)"><span class="pre">merlin.schema.schema.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bins</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infer_num_bins</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_bins</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_level</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparse</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'one_hot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_combinations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">merlin.models.tf.core.combinators.ParallelBlock</span><a class="reference internal" href="../_modules/merlin/models/tf/transforms/features.html#HashedCrossAll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#merlin.models.tf.HashedCrossAll" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><dl class="simple">
<dt>Parallel block consists of HashedCross blocks for all combinations of schema with all levels</dt><dd><p>through level 2 to max_level.</p>
</dd>
</dl>
<dl>
<dt>schema: Schema</dt><dd><p>Schema of the input data.</p>
</dd>
<dt>max_level: int</dt><dd><p>Max num of levels, this function would hash cross all combinations, the number of features
included in these combinations is in the range from 2 to max_level, i.e. [2, max_level], by
default 2, which means it would return hashed cross blocks of all level 2 combinations of
features within schema</p>
<dl class="simple">
<dt>For example, if schemas contain 3 features: feature_1, feature_2 and feature_3, if we call</dt><dd><p><cite>level_3_cross = HashedCrossAll(schema = schemas, max_level = 3)</cite></p>
</dd>
<dt>Then level_3_cross is a Parallel block, which contains 4 hashed crosses of</dt><dd><ol class="arabic simple">
<li><p>feature_1 and feature_2</p></li>
<li><p>feature_1 and feature_3</p></li>
<li><p>feature_2 and feature_3</p></li>
<li><p>feature_1, feature_2 and feature_3</p></li>
</ol>
</dd>
</dl>
</dd>
<dt>num_bins<span class="classifier">int</span></dt><dd><p>Number of hash bins, note that num_bins is for all hashed cross transformation block, no
matter what level it is, if you want to set different num_bins for different hashed cross,
please use HashedCross to define each one with different num_bins.</p>
</dd>
<dt>output_mode: string</dt><dd><p>Specification for the output of the layer. Defaults to
<cite>‚Äúone_hot‚Äù</cite>.  Values can be <cite>‚Äúint‚Äù</cite>, or <cite>‚Äúone_hot‚Äù</cite> configuring the layer as
follows:
- <cite>‚Äúint‚Äù</cite>: Return the integer bin indices directly.
- <cite>‚Äúone_hot‚Äù</cite>: Encodes each individual element in the input into an</p>
<blockquote>
<div><p>array the same size as <cite>num_bins</cite>, containing a 1 at the input‚Äôs bin
index.</p>
</div></blockquote>
</dd>
<dt>sparse<span class="classifier">bool</span></dt><dd><p>Boolean. Only applicable to <cite>‚Äúone_hot‚Äù</cite> mode. If True, returns a
<cite>SparseTensor</cite> instead of a dense <cite>Tensor</cite>. Defaults to False.</p>
</dd>
<dt>infer_num_bins: bool</dt><dd><p>If True, all num_bins would be set as the multiplier of corresponding feature cadinalities,
if the multiplier is bigger than max_num_bins, then it would be cliped by max_num_bins</p>
</dd>
<dt>max_num_bins: int</dt><dd><p>Upper bound of num_bins for all hashed cross transformation blocks, by default 100000.</p>
</dd>
<dt>ignore_combinations<span class="classifier">Sequence[Sequence[str]]</span></dt><dd><p>If provided, ignore feature combinations from this list.
Useful to avoid interacting features whose combined value is always the same.
For example, interacting these features is not useful and one of the features
is dependent on the other :
[[‚Äúitem_id‚Äù, ‚Äúitem_category‚Äù], [‚Äúuser_id‚Äù, ‚Äúuser_birth_city‚Äù, ‚Äúuser_age‚Äù]]</p>
</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">level_3_cross</span> <span class="o">=</span> <span class="n">HashedCrossAll</span><span class="p">(</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schemas</span><span class="p">,</span> <span class="n">max_level</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">infer_num_bins</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="merlin.models.tf.HashedCross.html" class="btn btn-neutral float-left" title="merlin.models.tf.HashedCross" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="merlin.models.tf.BroadcastToSequence.html" class="btn btn-neutral float-right" title="merlin.models.tf.BroadcastToSequence" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, NVIDIA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v23.02.00
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../v0.10.0/index.html">v0.10.0</a></dd>
      <dd><a href="../../v0.11.0/index.html">v0.11.0</a></dd>
      <dd><a href="merlin.models.tf.HashedCrossAll.html">v23.02.00</a></dd>
      <dd><a href="../../v23.04.00/index.html">v23.04.00</a></dd>
      <dd><a href="../../v23.05.00/index.html">v23.05.00</a></dd>
      <dd><a href="../../v23.06.00/index.html">v23.06.00</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../main/index.html">main</a></dd>
      <dd><a href="../../stable/index.html">stable</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NVJ1Y1YJHK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NVJ1Y1YJHK', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>